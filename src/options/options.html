<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="options.css">
    <title>ChatGPT Options</title>
</head>
<body>
<h1>Options for GPT answer-suggestions</h1>

<div id="options-container">
  <div id="settings-panel">
    <form id="options-form">
      <fieldset id="provider-settings">
        <legend>Provider Settings</legend>
        <div class="provider-model-row">
          <div class="provider-col">
            <label for="api-choice">Provider</label>
            <select id="api-choice" name="api-choice">
              <option value="openai">OpenAI</option>
              <option value="openrouter">OpenRouter</option>
              <option value="anthropic">Anthropic</option>
              <option value="mistral">Mistral</option>
            </select>
          </div>
          <div class="model-col">
            <label for="model-name">Model Name</label>
            <input type="text" id="model-name" name="model-name" placeholder="gpt-3.5-turbo">
            <p class="helper">Enter the model name exactly as supported by your provider. Leave blank for default.</p>
          </div>
        </div>
        <label for="api-key">API Key</label>
        <div class="input-group">
          <input type="password" id="api-key" name="api-key" aria-describedby="api-key-feedback">
          <button type="button" id="toggle-api-key" aria-label="Show API key" class="eye-icon">
            <img src="../icons/Eye Icon - Show Password.svg" alt="">
          </button>
        </div>
        <div id="api-key-feedback" class="feedback" role="status" aria-live="polite"></div>
      </fieldset>

      <fieldset id="system-instructions">
        <legend>System Instructions</legend>
        <textarea id="prompt-template" name="prompt-template" rows="12" style="width: 100%;"></textarea>
      </fieldset>

      <div id="improve-section" class="improve-section">
        <label for="show-advanced-improve">
          <input type="checkbox" id="show-advanced-improve">
          Show Advanced options for Improve-My-Response button
        </label>
      </div>

      <button type="submit" id="save-button" class="primary-button">Save</button>
    </form>
  </div>

  <div id="history-panel">
    <div class="history-header">
      <h2>LLM Call History</h2>
      <button id="download-csv" class="primary-button">Download CSV</button>
    </div>
    <div class="history-table-wrapper">
      <table id="history-table">
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Model</th>
            <th>Chat History</th>
            <th>Completion Tokens</th>
            <th>Total Tokens</th>
            <th>Response Time (ms)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<script type="module" src="options.js"></script>
</body>
</html>
